<section>
    <div id="room" class="container">
        <h2 class="header">
            {{ room.name }}
            <i class="icon-params" ng-click="configureGame()"></i>
        </h2>

        <div id="room-parameters">
            <div class="row">
                <div class="col-lg-4 bonus-list">
                    <div class="btn-group btn-group-xs">
                        <button type="button" class="btn btn-default active">All</button>
                        <button type="button" class="btn btn-default">Custom</button>
                        <button type="button" class="btn btn-default">None</button>
                    </div>
                    <h2>Bonus</h2>
                    <span class="bonus bonus-self-fast"><i class="icon-check"></i></span>
                    <span class="bonus bonus-enemy-fast"><i class="icon-check"></i></span>
                    <span class="bonus bonus-self-slow"><i class="icon-check"></i></span>
                    <span class="bonus bonus-enemy-slow"><i class="icon-check"></i></span>
                    <span class="bonus bonus-enemy-big"><i class="icon-check"></i></span>
                    <span class="bonus bonus-self-small"><i class="icon-check"></i></span>
                    <span class="bonus bonus-enemy-inverse"><i class="icon-check"></i></span>
                    <span class="bonus bonus-self-master"><i class="icon-check"></i></span>
                    <span class="bonus bonus-all-borderless"><i class="icon-check"></i></span>
                    <span class="bonus bonus-all-color"><i class="icon-check"></i></span>
                    <span class="bonus bonus-all-clear"><i class="icon-check"></i></span>
                </div>
                <div class="col-lg-5 params">
                    <div>
                        <label for="speed">Speed</label>
                        <div>
                            <span class="less-icon"><i class="icon-minus"></i></span>
                            <span class="more-icon"><i class="icon-plus"></i></span>
                            <input id="speed" type ="range" min ="10" max="100" step ="1" value ="70"/>
                        </div>
                    </div>
                    <div>
                        <label for="curving">Curving</label>
                        <div>
                            <span class="less-icon"><i class="icon-minus"></i></span>
                            <span class="more-icon"><i class="icon-plus"></i></span>
                            <input id="curving" type ="range" min ="10" max="100" step ="1" value ="70"/>
                        </div>
                    </div>
                    <div>
                        <label for="bonus-rate">Bonus rate</label>
                        <div>
                            <span class="less-icon"><i class="icon-minus"></i></span>
                            <span class="more-icon"><i class="icon-plus"></i></span>
                            <input id="bonus-rate" type ="range" min ="10" max="100" step ="1" value ="70"/>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 max-score">
                    <h2>Max score</h2>
                    <input type="text" class="form-control" id="max-score" value="80" placeholder="Max" maxlength="3" />
                </div>
            </div>

        </div>

        <h3>
            <form ng-submit="submitAddPlayer()" class="top-right-form" name="addPlayer">
                <button type="submit" id="submit"><span><i class="icon-plus"></i></span></button>
                <input type="text" id="add-user-name" ng-model="username" class="form-control" name="username" placeholder="Add a local player" maxlength="{{ nameMaxLength }}" />
                <div class="clearfix"></div>
            </form>
            <p class="count">
                <ng-pluralize count="room.players.items.length" when="{
                    '0': 'No player',
                    'one': '1 player',
                    'other': '{} players'}"
                />
            </p>
            <div class="clearfix"></div>
        </h3>

        <div class="room-details">

            <table class="room-players table v-align-middle">
                <thead>
                    <tr>
                        <th class="col-remove"></th>
                        <th class="col-player">Name</th>
                        <th class="col-color">Color</th>
                        <th class="col-keys">Controls</th>
                        <th class="col-ready">Ready?</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-if="room.players.isEmpty()">
                        <td colspan="5" class="empty">
                            Waiting for players...
                        </th>
                    </tr>
                    <tr ng-repeat="player in room.players.items" ng-if="player.local" class="local">
                        <td class="col-remove">
                            <button type="button" class="btn btn-link btn-sm btn-remove pull-left" ng-click="removePlayer(player)">
                                <span class="icon-close"></span>
                            </button>
                        </td>
                        <td class="col-player">
                            <input type="text" ng-model="player.name" ng-blur="setName(player)" class="form-control player-name" name="name" maxlength="{{ nameMaxLength }}" />
                        </td>
                        <td class="col-color">
                            <input type="text" colorpicker="hex" colorpicker-position="right" ng-model="player.color" ng-blur="setColor(player)" class="form-control player-color" name="color" placeholder="#CCCCCC" style="border-color: {{ player.color }};" maxlength="{{ colorMaxLength }}" />
                        </td>
                        <td>
                            <button class="btn btn-default control"
                                ng-repeat="control in player.controls"
                                ng-click="control.toggle()"
                                ng-class="{ 'active': control.mapper.listening }"
                            >
                                {{ control.mapper.view }}
                            </button>
                        </td>
                        <td class="col-ready">
                            <div class="player-ready" ng-click="setReady(player)" ng-class="{ ready: player.ready }">
                                <span>
                                    <span ng-if="!player.ready">Ready?</span>
                                    <span ng-if="player.ready" class="icon-check success"></span>
                                </span>
                            </div>
                        </td>
                    </tr>
                    <tr ng-repeat="player in room.players.items" ng-if="!player.local">
                        <td></td>
                        <td class="col-player">
                            <p class="player-name">{{ player.name }}</p>
                        </td>
                        <td class="col-color">
                            <span class="line-color-preview" style="background-color: {{ player.color }};"></span>
                            <p>{{ player.color }}</p>
                        </td>
                        <td></td>
                        <td class="col-ready">
                            <div class="player-ready" ng-class="{ ready: player.ready }">
                                <span>
                                    <i ng-if="player.ready" class="icon-check success"></i>
                                    <i ng-if="!player.ready" class="icon-close success"></i>
                                </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="room-chat">
                <div class="chat-wrapper">
                    <div id="feed">
                        <div class="one-message">
                            <strong>Welcome!</strong>
                        </div>
                        <div ng-repeat="message in messages" class="one-message">
                            <strong style="color: {{ message.player.color ? message.player.color : '#75858c' }};">
                                {{ message.getPlayerName() }}:
                            </strong>
                            {{ message.content }}
                        </div>
                    </div>
                    <form ng-submit="submitTalk()" name="talk" class="action-line">
                            <button type="submit" class="btn btn-default"><span><i class="icon-angle-right"></i></span></button>
                            <input type="text" name="message" ng-model="currentMessage.content" class="sent-message form-control" placeholder="Enter message..." maxlength="{{ messageMaxLength }}" />
                            <div class="clearfix"></div>
                    </form>
                </div>
            </div>

            <div class="clearfix"></div>

        </div>
    </div>
</section>
